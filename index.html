<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vocal Logic - 온라인 피아노</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .no-select { user-select: none; -webkit-user-select: none; }
        .white-key {
            background: white; border: 1px solid #ccc; border-radius: 0 0 4px 4px;
            box-shadow: 0 4px 5px rgba(0,0,0,0.2); transition: all 0.1s; z-index: 1;
        }
        .white-key:active, .white-key.active {
            transform: translateY(2px); background: #f3f4f6; box-shadow: 0 2px 2px rgba(0,0,0,0.2);
        }
        .black-key {
            background: #1f2937; border-radius: 0 0 4px 4px;
            box-shadow: 2px 2px 2px rgba(0,0,0,0.3); z-index: 2; transition: all 0.1s;
        }
        .black-key:active, .black-key.active {
            transform: scale(0.98) translateY(2px); background: #000;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center font-sans no-select">
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Vocal Logic Piano</h1>
        <p class="text-gray-600">마우스 클릭 또는 키보드로 연주해보세요</p>
    </div>
    <div class="relative bg-gray-800 p-4 rounded-lg shadow-xl flex justify-center">
        <div class="relative flex" id="piano-container" style="height: 12rem;"></div>
    </div>
    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const notes = [
            { note: 'C', freq: 261.63, type: 'white', key: 'a' },
            { note: 'C#', freq: 277.18, type: 'black', key: 'w' },
            { note: 'D', freq: 293.66, type: 'white', key: 's' },
            { note: 'D#', freq: 311.13, type: 'black', key: 'e' },
            { note: 'E', freq: 329.63, type: 'white', key: 'd' },
            { note: 'F', freq: 349.23, type: 'white', key: 'f' },
            { note: 'F#', freq: 369.99, type: 'black', key: 't' },
            { note: 'G', freq: 392.00, type: 'white', key: 'g' },
            { note: 'G#', freq: 415.30, type: 'black', key: 'y' },
            { note: 'A', freq: 440.00, type: 'white', key: 'h' },
            { note: 'A#', freq: 466.16, type: 'black', key: 'u' },
            { note: 'B', freq: 493.88, type: 'white', key: 'j' },
            { note: 'C2', freq: 523.25, type: 'white', key: 'k' }
        ];
        const container = document.getElementById('piano-container');
        function playTone(freq) {
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.type = 'sine'; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 1.5);
            osc.connect(gainNode); gainNode.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 1.5);
        }
        let whiteCount = 0;
        notes.forEach(note => {
            const el = document.createElement('div');
            if(note.type === 'white') {
                el.className = 'white-key w-12 h-48 flex items-end justify-center pb-4 cursor-pointer';
                el.style.position = 'absolute'; el.style.left = `${whiteCount * 3}rem`;
                el.innerText = note.key.toUpperCase();
                whiteCount++;
            } else {
                el.className = 'black-key w-8 h-32 absolute cursor-pointer';
                el.style.left = `${(whiteCount * 3) - 1.5}rem`;
            }
            const trigger = () => { playTone(note.freq); el.classList.add('active'); setTimeout(()=>el.classList.remove('active'),100); };
            el.onmousedown = trigger; el.ontouchstart = (e) => { e.preventDefault(); trigger(); };
            el.id = `key-${note.key}`;
            container.appendChild(el);
        });
        container.style.width = `${whiteCount * 3}rem`;
        document.onkeydown = (e) => {
            if(e.repeat) return;
            const target = document.getElementById(`key-${e.key.toLowerCase()}`);
            if(target) target.onmousedown();
        };
    </script>
</body>
</html>
